{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://txt2img.local/schemas/config.json",
    "title": "txt2img Model Configuration",
    "description": "Configuration schema for txt2img model settings",
    "type": "object",
    "required": [
        "model"
    ],
    "properties": {
        "type": {
            "type": "string",
            "enum": [
                "sdxl",
                "sd3",
                "flux"
            ],
            "default": "sdxl",
            "description": "Model architecture type (AIR naming convention)"
        },
        "model": {
            "type": "string",
            "description": "Model reference: Civitai AIR URN (urn:air:...), HuggingFace repo (org/repo), or URL",
            "examples": [
                "urn:air:sdxl:checkpoint:civitai:827184@2514310",
                "stabilityai/stable-diffusion-xl-base-1.0",
                "https://example.com/model.safetensors"
            ]
        },
        "vae": {
            "type": [
                "string",
                "null"
            ],
            "default": null,
            "description": "VAE override: null (use embedded), Civitai AIR, HuggingFace repo, or URL",
            "examples": [
                null,
                "urn:air:sdxl:vae:civitai:1684460@1906483",
                "madebyollin/sdxl-vae-fp16-fix"
            ]
        },
        "loras": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "ref": {
                        "type": "string",
                        "description": "LoRA reference (Civitai AIR URN or URL)"
                    },
                    "triggers": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "Manual trigger words (optional, auto-detected from Civitai if not specified)"
                    },
                    "weight": {
                        "type": "number",
                        "default": 1.0,
                        "minimum": 0.0,
                        "maximum": 2.0,
                        "description": "Recommended LoRA weight (overall influence)"
                    },
                    "trigger_weight": {
                        "type": "number",
                        "default": 0.5,
                        "minimum": 0.0,
                        "maximum": 2.0,
                        "description": "Recommended trigger embedding weight (target influence)"
                    }
                },
                "required": [
                    "ref"
                ]
            },
            "default": [],
            "description": "List of LoRA configurations"
        },
        "quantization": {
            "type": "string",
            "enum": [
                "none",
                "int8wo",
                "fp8wo"
            ],
            "default": "none",
            "description": "TorchAO quantization type: none, int8 weight-only, fp8 weight-only"
        },
        "vae_tiling": {
            "type": "boolean",
            "default": false,
            "description": "Enable VAE tiling for reduced VRAM usage"
        },
        "training_resolution": {
            "type": "integer",
            "default": 1024,
            "minimum": 512,
            "maximum": 2048,
            "description": "Model's training resolution in pixels"
        },
        "default_steps": {
            "type": "integer",
            "default": 20,
            "minimum": 1,
            "maximum": 150,
            "description": "Default number of inference steps"
        },
        "default_cfg": {
            "type": "number",
            "default": 7.0,
            "minimum": 1.0,
            "maximum": 30.0,
            "description": "Default CFG scale (guidance scale)"
        },
        "default_sampler": {
            "type": "string",
            "enum": [
                "euler",
                "euler_a",
                "dpm++_2m"
            ],
            "default": "euler",
            "description": "Default sampler/scheduler"
        },
        "output_format": {
            "type": "string",
            "enum": [
                "webp",
                "png"
            ],
            "default": "webp",
            "description": "Output image format"
        }
    },
    "additionalProperties": true
}